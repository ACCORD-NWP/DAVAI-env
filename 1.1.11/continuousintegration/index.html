<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Continuous integration · Davai</title><meta name="title" content="Continuous integration · Davai"/><meta property="og:title" content="Continuous integration · Davai"/><meta property="twitter:title" content="Continuous integration · Davai"/><meta name="description" content="Documentation for Davai."/><meta property="og:description" content="Documentation for Davai."/><meta property="twitter:description" content="Documentation for Davai."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.jpg" alt="Davai logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">Davai</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><span class="tocitem">Getting Started</span><ul><li><a class="tocitem" href="../create_branch/">Creating a branch</a></li><li><a class="tocitem" href="../runtests/">Running tests</a></li><li><a class="tocitem" href="../ciboulai/">Monitoring results</a></li><li><a class="tocitem" href="../ciboulai_navigation/">Ciboulaï navigation</a></li></ul></li><li><span class="tocitem">More info</span><ul><li><a class="tocitem" href="../organization/">Organization of experiment</a></li><li><a class="tocitem" href="../jobs_tasks/">Jobs &amp; Tasks</a></li><li><a class="tocitem" href="../mtool/">MTOOL</a></li><li><a class="tocitem" href="../tips/">First tips</a></li></ul></li><li><span class="tocitem">Advanced topics</span><ul><li><a class="tocitem" href="../build/">Build</a></li><li><a class="tocitem" href="../rerun/">Rerun tests</a></li><li><a class="tocitem" href="../investigatingproblems/">Investigate Problems</a></li><li><a class="tocitem" href="../buildoptions/">Build options</a></li><li><a class="tocitem" href="../inputdata/">Input data</a></li><li><a class="tocitem" href="../otheroptions/">Other options</a></li><li><a class="tocitem" href="../userconfiguration/">User configuration</a></li><li><a class="tocitem" href="../parallelprofiling/">Parallel profiling</a></li><li><a class="tocitem" href="../expertthresholds/">Expert thresholds</a></li></ul></li><li><span class="tocitem">Developer documentation</span><ul><li><a class="tocitem" href="../uget/uget/">uget</a></li><li><a class="tocitem" href="../exercise4developers/">Exercises</a></li></ul></li><li><span class="tocitem">Appendix</span><ul><li><a class="tocitem" href="../versioningtest/">Versioning tests</a></li><li class="is-active"><a class="tocitem" href>Continuous integration</a></li><li><a class="tocitem" href="../setting_reference/">Setting reference exp</a></li><li><a class="tocitem" href="../internalorganization/">Internal organization</a></li></ul></li><li><span class="tocitem">HPC Platforms</span><ul><li><a class="tocitem" href="../belenos/">Belenos</a></li><li><a class="tocitem" href="../atos_bologna/">Atos</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Appendix</a></li><li class="is-active"><a href>Continuous integration</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Continuous integration</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/ACCORD-NWP/DAVAI-env" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/ACCORD-NWP/DAVAI-env/blob/master/docs/src/continuousintegration.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h3 id="Steps-and-updates-in-the-Continuous-Integration-process"><a class="docs-heading-anchor" href="#Steps-and-updates-in-the-Continuous-Integration-process">Steps and updates in the Continuous Integration process</a><a id="Steps-and-updates-in-the-Continuous-Integration-process-1"></a><a class="docs-heading-anchor-permalink" href="#Steps-and-updates-in-the-Continuous-Integration-process" title="Permalink"></a></h3><ol><li><p>Integration of <code>b1</code> :</p><ul><li><p>Reference: <code>x0</code> is the default reference xp in <code>dev_DV49_toT1</code>   config file</p></li><li><p>Tests: <code>b1</code> did not require to adapt the tests <span>$\rightarrow$</span> we   can test with branch <code>dev_DV49_toT1</code> unchanged (and still equal   to <code>DV49</code>)</p></li></ul><p><code>davai-new_xp dev_CY49_toT1 -v dev_DV49_toT1</code><br/> <span>$~~~\hookrightarrow~~~$</span> <code>xi1 == x1 == x0</code></p></li><li><p>Integration of <code>b2</code> :</p><ul><li><p>Reference: <code>xi1</code> should normally be the reference xp, but since   its results are bit-identical to <code>x0</code> as opposed to <code>x2</code>, it is   more relevant to compare to <code>x2</code>, to check that the merge of   <code>b1</code> and <code>b2</code> still give the same results as <code>b2</code></p></li><li><p>Tests: <code>b2</code> did not require to adapt the tests <span>$\rightarrow$</span>   tests branch <code>DV49_toT1</code> unchanged</p></li></ul><p><code>davai-new_xp dev_CY49_toT1 -v DV49_toT1</code><br/> <span>$~~~$</span>and set <code>ref_xpid = x2</code><br/> <span>$~~~\hookrightarrow~~~$</span> <code>xi2 == x2</code></p><ul><li>then <code>ref_xpid</code> should be set to <code>xi2</code> in branch <code>DV49_toT1</code></li></ul></li><li><p>Integration of <code>b3</code> :</p><ul><li><p>Reference: <code>b3</code> does not change the results, so reference   experiment is as expected by default <code>xi2</code></p></li><li><p>Tests: <code>b3</code> requires tests adaptations (<code>DV49_b3</code>) <span>$\rightarrow$</span>   update <code>dev_DV49_toT1</code> by merging <code>DV49_b3</code> in</p></li></ul><p><code>davai-new_xp dev_CY49_toT1 -v DV49_toT1</code><br/> <span>$~~~\hookrightarrow~~~$</span> <code>xi3 == xi2</code></p></li><li><p>Integration of <code>b4</code> : <em>(where it becomes more or less tricky)</em></p><ul><li><p>Reference: <code>b4</code> changes the results, but the results of <code>xi3</code>   (current default reference for integration branch) are also   changed from <code>x0</code> (since <code>b2</code>) <span>$\rightarrow$</span> the reference   experiment becomes less obvious !<br/>  The choice of the reference should be made depending on the   width of impact on both sides:</p><ol><li><p>if there is more differences in the results between  <code>dev_CY49_toT1</code> and <code>CY49</code> than between <code>b4</code> and <code>CY49</code>:<br/> <span>$\rightarrow$</span> <code>xi3</code> should be taken as reference, and the  differences finely compared to those shown in <code>x4</code></p></li><li><p>if there is more differences in the results between <code>b4</code> and  <code>CY49</code> than between <code>dev_CY49_toT1</code> and <code>CY49</code>:<br/> <span>$\rightarrow$</span> <code>x4</code> should be taken as reference, and the  differences finely compared to those shown in <code>xi3’</code>, where  <code>xi3’</code> is a <em>&quot;witness&quot;</em> experiment comparing the integration  branch after integration of <code>b3</code> (commit <code>&lt;c3&gt;</code>) to <code>CY49</code>  (experiment <code>x0</code>):<br/> <code>davai-new_xp &lt;c3&gt; -v dev_DV49_toT1</code><br/> <span>$~~~$</span>and set <code>ref_xpid = x0</code><br/> <span>$~~~\hookrightarrow~~~$</span> <code>xi3’</code></p></li></ol><p>This is still OK if the tests affected by <code>dev_CY49_toT1</code> (via   <code>b2</code>) and the tests affected by <code>b4</code> are not the same subset, or   if at least if the affected fields are not the same. If they are   (e.g. numerical differences that propagate prognostically   through the model), the conclusion becomes much more difficult   !!!<br/>  In this case, we do not really have explicit recommendation; the   integrators should double-check the result of the merge with the   author of the contribution <code>b4</code>. Any idea welcome to sort it   out.</p></li><li><p>Tests: <code>b4</code> requires tests adaptations (<code>DV49_b4</code>) <span>$\rightarrow$</span>   update <code>dev_DV49_toT1</code> by merging in <code>DV49_b4</code> in</p></li></ul><p><code>davai-new_xp dev_CY49_toT1 -v dev_DV49_toT1</code><br/> <span>$~~~$</span>and set <code>ref_xpid = xi3|xi4</code><br/> <span>$~~~\hookrightarrow~~~$</span> <code>xi4</code></p></li></ol></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../versioningtest/">« Versioning tests</a><a class="docs-footer-nextpage" href="../setting_reference/">Setting reference exp »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Thursday 21 November 2024 13:59">Thursday 21 November 2024</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
